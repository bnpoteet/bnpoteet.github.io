<body>
	<h1>Austin Affordable Housing Data</h1>	
	<mat-form-field appearance="fill">
		<mat-label>Affordability Program</mat-label>
		<mat-select [(value)]="selectedProgram" (selectionChange)="onFilterChanged()">
			<mat-option *ngFor="let program of affordabilityPrograms" [value]="program">
				{{program}}
			</mat-option>
		</mat-select>
	</mat-form-field>
	<div>Affordable Units: {{ affordableUnitCount | number }}</div>
	<div>Total Units: {{ totalUnitCount | number }}</div>
	<div>
		<table mat-table [dataSource]="dataSource" matSort>
	
			<ng-container matColumnDef="project_name">
				<th mat-header-cell *matHeaderCellDef mat-sort-header> Project Name </th>
				<td mat-cell *matCellDef="let element"> {{ element.project_name }} </td>
			</ng-container>

			<ng-container matColumnDef="address">
				<th mat-header-cell *matHeaderCellDef mat-sort-header> Address </th>
				<td mat-cell *matCellDef="let element"> {{ element.address }} </td>
			</ng-container>
	
			<ng-container matColumnDef="total_units">
				<th mat-header-cell *matHeaderCellDef mat-sort-header> Total Units </th>
				<td mat-cell *matCellDef="let element"> {{ element.total_units | number }} </td>
			</ng-container>
	
			<ng-container matColumnDef="total_affordable_units">
				<th mat-header-cell *matHeaderCellDef mat-sort-header> Affordable Units </th>
				<td mat-cell *matCellDef="let element"> {{ element.total_affordable_units | number }} </td>
			</ng-container>

			<ng-container matColumnDef="status">
				<th mat-header-cell *matHeaderCellDef mat-sort-header> Status </th>
				<td mat-cell *matCellDef="let element"> {{ element.status }} </td>
			</ng-container>

			<ng-container matColumnDef="developer">
				<th mat-header-cell *matHeaderCellDef mat-sort-header> Developer </th>
				<td mat-cell *matCellDef="let element"> {{ element.developer }} </td>
			</ng-container>
	
			<tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
			<tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
			<tr class="mat-row" *matNoDataRow>
				<td class="mat-cell" colspan="4">No data matching the filter.</td>
			</tr>
		</table>
		<mat-paginator [pageSizeOptions]="[5, 10, 20]"
			showFirstLastButtons 
			aria-label="Select page">
		</mat-paginator>
	</div>
	<!-- <plotly-plot [data]="graph.data" [layout]="graph.layout"></plotly-plot> -->
</body>